!function(e,i,r){"use strict";var o=i.getElementById("codemirror"),t=CodeMirror.fromTextArea(o,{lineNumbers:!0,mode:"javascript",theme:"monokai"}),n=i.getElementById("select");n.options[n.selectedIndex].textContent;o=i.getElementById("codemirror-theme");var d=CodeMirror.fromTextArea(o,{lineNumbers:!0,styleActiveLine:!0,mode:"javascript",matchBrackets:!0});r("#select").change(function(){var e=r(":selected").val();r('[title="theme"]').attr("href","../../../app-assets/vendors/css/editors/theme/"+e.toLowerCase()+".css"),d.setOption("theme",e)});var m=location.hash&&location.hash.slice(1)||i.location.search&&decodeURIComponent(i.location.search.slice(1));m&&(n.value=m,d.setOption("theme",m)),CodeMirror.on(e,"hashchange",function(){var e,r=location.hash.slice(1);r&&(n.value=r,e=n.options[n.selectedIndex].textContent,d.setOption("theme",e),location.hash="#"+e)}),o=i.getElementById("codemirror-loadmode"),CodeMirror.modeURL="../../../app-assets/vendors/js/editors/codemirror/mode/*/*.js";var l=CodeMirror.fromTextArea(o,{lineNumbers:!0}),a=i.getElementById("mode");CodeMirror.on(a,"keypress",function(e){13==e.keyCode&&change()}),r("#change").on("click",function(){var e,r,o,t=a.value;if(e=/.+\.([^.]+)$/.exec(t))(n=CodeMirror.findModeByExtension(e[1]))&&(r=n.mode,o=n.mime);else if(/\//.test(t)){var n;(n=CodeMirror.findModeByMIME(t))&&(r=n.mode,o=t)}else r=o=t;r?(l.setOption("mode",o),CodeMirror.autoLoadMode(l,r),i.getElementById("modeinfo").textContent=o):alert("Could not find a mode corresponding to "+t)});var s=i.getElementById("codemirror-sublime").value,c=CodeMirror.keyMap.sublime;for(var u in c){var f=c[u];"fallthrough"==u||"..."==f||/find/.test(f)&&!/findUnder/.test(f)||(s+='\t"'+u+'": "'+f+'",\n')}s+="}\n\n// The implementation of joinLines\n",s+=CodeMirror.commands.joinLines.toString().replace(/^function\s*\(/,"function joinLines(").replace(/\n	/g,"\n")+"\n",o=i.getElementById("codemirror-sublime");t=CodeMirror.fromTextArea(o,{value:s,lineNumbers:!0,theme:"monokai",mode:"javascript",keyMap:"sublime",autoCloseBrackets:!0,matchBrackets:!0,showCursorWhenSelecting:!0,theme:"monokai",tabSize:2});o=i.getElementById("codemirror-js");var h,C=i.getElementById("codemirror-html"),g=i.getElementById("codemirror-markdown");function M(){var e=i.getElementById("preview"),r=e.contentDocument||e.contentWindow.document;r.open(),r.write(t.getValue()),r.close()}e.editor=CodeMirror.fromTextArea(o,{mode:"javascript",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),t.foldCode(CodeMirror.Pos(13,0)),e.editor_html=CodeMirror.fromTextArea(C,{mode:"text/html",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),editor_html.foldCode(CodeMirror.Pos(0,0)),editor_html.foldCode(CodeMirror.Pos(21,0)),e.editor_markdown=CodeMirror.fromTextArea(g,{mode:"markdown",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),o=i.getElementById("codemirror-marker"),(t=new CodeMirror.fromTextArea(o,{lineNumbers:!0,styleSelectedText:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0}})).markText({line:6,ch:26},{line:6,ch:42},{className:"styled-background"}),(t=new CodeMirror.fromTextArea(i.getElementById("codemirror-preview"),{mode:"text/html"})).on("change",function(){clearTimeout(h),h=setTimeout(M,300)}),setTimeout(M,300);var p=["#967ADC","#37BC9B","#F6BB42","#3BAFDA","#DA4453","#3f51b5","#2196F3","#ff9800","#e91e63"],v=[];s="";for(var y=1;y<=9;y++){v.push({color:p[y],column:10*y,lineStyle:"dashed"});for(var B=1;B<y;B++)s+="          ";s+="0123456789\n"}o=i.getElementById("codemirror-ruler"),t=new CodeMirror(o,{rulers:v,value:s+s+s,lineNumbers:!0}),o=i.getElementById("codemirror-tabs"),t=CodeMirror.fromTextArea(o,{lineNumbers:!0,tabSize:4,indentUnit:4,indentWithTabs:!0,mode:"text/html"})}(window,document,jQuery);
$(window).on("load",function(){var c=function(){d3.select("#pie-calendar");var r,t=1380,n=820,o="#EAEAEA",e=0,a=(new Date).getMonth(),l=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(){return t-10}function u(){return n-40}function c(){return d()/7}function s(){return u()/5}function f(){var t=new Date;return t.setMonth(a+e),t.getMonth()}function g(){var t=new Date;return t.setMonth(a+e),t.getFullYear()}return{calendarWidth:t,calendarHeight:n,gridXTranslation:10,gridYTranslation:40,gridWidth:d(),gridHeight:u(),cellWidth:c(),cellHeight:s(),getDatesGroup:function(){return r},setDatesGroup:function(t){r=t},incrementCounter:function(){e+=1},decrementCounter:function(){e-=1},monthToDisplay:f(),monthToDisplayAsText:function(){return l[f()]},yearToDisplay:g,gridCellPositions:function(){var t=[];for(y=0;y<5;y++)for(x=0;x<7;x++)t.push([x*c(),y*s()]);return t}(),daysInMonth:function(){var t=[],r=new Date(g(),f(),1).getDay(),n=new Date(g(),f(),0).getDate();for(i=1;i<=r;i++)t.push([n-r+i,o]);var e=new Date(g(),f()+1,0).getDate();for(i=1;i<=e;i++)t.push([i,"#FFFFFF"]);var a=35-t.length;for(i=1;i<=a;i++)t.push([i,o]);return t.slice(0,35)}}}();function t(){c.decrementCounter(),n()}function r(){c.incrementCounter(),n()}function n(t,r){$("#currentMonth").text(c.monthToDisplayAsText()+" "+c.yearToDisplay());var n=c.daysInMonth(),e=c.gridCellPositions;c.datesGroup.selectAll("text").data(n).attr("x",function(t,r){return e[r][0]}).attr("y",function(t,r){return e[r][1]}).attr("dx",20).attr("dy",20).attr("transform","translate("+c.gridXTranslation+","+c.gridYTranslation+")").text(function(t){return t[0]}),c.calendar.selectAll("rect").data(n).style("fill",function(t){return t[1]}),o()}function o(){var t=function(){for(var t=[],r=0;r<35;r++)t.push([Math.floor(100*Math.random()),Math.floor(100*Math.random()),Math.floor(100*Math.random())]);return t}(),n=c.cellWidth/3,r=d3.layout.pie(),e=d3.scale.ordinal().range(["#99B898","#FECEA8","#FF847C","#E84A5F","#F8B195","#F67280","#C06C84"]),a=d3.svg.arc().innerRadius(0).outerRadius(n),o=[];for(i=0;i<t.length;i++){var l=r(t[i]);for(j=0;j<l.length;j++)o.push([l[j],i,j])}var d=c.gridCellPositions;c.chartsGroup.selectAll("g.arc").remove();var u=c.chartsGroup.selectAll("g.arc").data(o).enter().append("g").attr("class","arc").attr("transform",function(t){var r=t[1];return"translate("+(n+5*c.gridXTranslation+d[r][0])+", "+(n+1.25*c.gridYTranslation+d[r][1])+")"});u.append("path").attr("fill",function(t,r){return e(t[2])}).attr("d",function(t,r){return a(t[0])}),u.append("text").attr("transform",function(t,r){return"translate("+a.centroid(t[0])+")"}).attr("text-anchor","middle").text(function(t,r){return t[0].value}).style("fill","#FFF")}function e(){width=ele.node().getBoundingClientRect().width-margin.left-margin.right,container.attr("width",width+margin.left+margin.right),svg.attr("width",width+margin.left+margin.right),x.range([0,width]),svg.selectAll(".d3-xaxis").call(xAxis),svg.selectAll(".d3-line").attr("d",line)}$(document).ready(function(){!function(t,r){c.calendar=d3.select("#pie-calendar").append("svg").attr("class","calendar").attr("width",c.calendarWidth).attr("height",c.calendarHeight).append("g");var n=c.gridCellPositions;c.calendar.selectAll("rect").data(n).enter().append("rect").attr("x",function(t){return t[0]}).attr("y",function(t){return t[1]}).attr("width",c.cellWidth).attr("height",c.cellHeight).style("stroke","#555").style("fill","white").attr("transform","translate("+c.gridXTranslation+","+c.gridYTranslation+")");var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];c.calendar.selectAll("headers").data([0,1,2,3,4,5,6]).enter().append("text").attr("x",function(t){return n[t][0]}).attr("y",function(t){return n[t][1]}).attr("dx",c.gridXTranslation+5).attr("dy",30).text(function(t){return e[t]}),c.datesGroup=c.calendar.append("svg:g");var a=c.daysInMonth();c.datesGroup.selectAll("daysText").data(a).enter().append("text").attr("x",function(t,r){return n[r][0]}).attr("y",function(t,r){return n[r][1]}).attr("dx",20).attr("dy",20).attr("transform","translate("+c.gridXTranslation+","+c.gridYTranslation+")").text(function(t){return t[0]}),c.chartsGroup=c.calendar.append("svg:g"),o()}(),n(),$("#back").on("click",t),$("#forward").on("click",r)}),$(window).on("resize",e),$(".menu-toggle").on("click",e)});